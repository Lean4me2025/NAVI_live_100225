
<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>NAVI – Dashboard</title>
<link rel="stylesheet" href="assets/style.css">
<script defer src="assets/app.js"></script>
</head><body>
<div class="container">
  <div class="header">
    <div class="brand"><div class="logo"></div><h1>NAVI Dashboard</h1></div>
    <div id="plan-badge" class="badge plan-badge">Plan: –</div>
  </div>

  <div class="grid cols-3">
    <div class="card">
      <div class="kicker">Flow</div>
      <h2>Your Next Steps</h2>
      <ol class="list">
        <li>Confirm your plan (Starter/Pro/Mastery)</li>
        <li>Finish your <a href="strategy.html">Five W’s + How</a></li>
        <li>Use unlocked tools below</li>
      </ol>
      <div class="toolbar" style="margin-top:8px">
        <button class="button ghost" onclick="go('index.html')">Change Plan</button>
        <button class="button" onclick="go('strategy.html')">Edit Strategy</button>
      </div>
    </div>

    <div class="card">
      <div class="kicker">NOVA Snap</div>
      <h2>Highlights</h2>
      <div id="nova-snap" class="sub">Pulling from your NOVA results…</div>
    </div>

    <div class="card">
      <div class="kicker">Upgrade</div>
      <h2>Upgrade Options</h2>
      <div id="upgradeOptions"></div>
    </div>
  </div>

  <div class="card">
    <div class="kicker">Tools</div>
    <h2 class="section-title">Included in your plan</h2>
    <div id="included-cascade" class="hint"></div>
    <div id="tools-included" class="grid cols-3"></div>
    <hr>
    <h2 class="section-title">Available if you upgrade <span id="upgrade-note" class="subtle"></span></h2>
    <div id="tools-upgrade" class="grid cols-3"></div>
  </div>

  <footer class="center">Execute with clarity. Multiply with excellence.</footer>
</div>

<script>
// Catalog with richer outlines
const CATALOG = [
  {id:'resume', title:'Resume Builder', plan:'starter', href:'tools/resume.html', desc:'Build a structured resume with print‑to‑PDF, preloaded with your Nova traits and chosen focus role.'},
  {id:'jobs', title:'Job Suggestions', plan:'starter', href:'tools/jobs.html', desc:'See roles aligned to your strategy and filters (city/state, remote/hybrid/onsite, keywords).'},
  {id:'cover', title:'Cover Letter Generator', plan:'pro', href:'tools/cover-letter.html', desc:'Generate tailored cover letters that mirror your resume and target job requirements.'},
  {id:'intel', title:'Company Intel Outline', plan:'pro', href:'tools/company-intel.html', desc:'Capture quick research: mission, org cues, growth signals, process maturity, and your 30/60/90 plan.'},
  {id:'filters', title:'Advanced Filters + Saved Search', plan:'pro', href:'tools/filters.html', desc:'Save custom searches and filter by roles, salary floor, include/exclude keywords and locations.'},
  {id:'roadmap', title:'Career Roadmap (PDF)', plan:'mastery', href:'tools/roadmap.html', desc:'Export a step‑by‑step plan with milestones and timelines aligned to your focus role and purpose.'},
  {id:'coaching', title:'Priority Coaching Link', plan:'mastery', href:'tools/coaching.html', desc:'Book priority coaching/mentorship to accelerate your progress when needed.'},
];
function rank(p){ return p==='mastery'?3:(p==='pro'?2:1); }

function renderNovaSnap(){
  const n=getNova(); const el=qs('#nova-snap');
  if(!n){ el.innerHTML = '<span class="warn">No NOVA data found. Load a sample from the Welcome page.</span>'; return; }
  el.innerHTML = `
    <div class="tag">Name: ${n.name||'—'}</div>
    <div class="tag">Categories: ${(n.categories||[]).join(', ')||'—'}</div>
    <div class="tag">Top Traits: ${(n.traits||[]).slice(0,5).join(', ')||'—'}</div>
    <div class="tag">Career State: ${n.careerState||'—'}</div>
    <div class="tag">Roles: ${(n.roles||[]).slice(0,3).join(', ')||'—'}</div>`;
}

function renderToolBuckets(){
  const p=getPlan(), my=rank(p);
  const inc=qs('#tools-included'), upg=qs('#tools-upgrade');
  const upgNote=qs('#upgrade-note'); const cascade=qs('#included-cascade');
  if(upgNote){ upgNote.textContent = '(upgrade to ' + (p==='starter'?'Pro or Mastery':(p==='pro'?'Mastery':'—')) + ')'; }
  if(cascade){
    if(p==='starter') cascade.textContent='Starter includes your core tools to get moving.';
    else if(p==='pro') cascade.textContent='Pro includes everything in Starter, plus the tools below.';
    else cascade.textContent='Mastery includes everything in Pro, plus the tools below.';
  }
  inc.innerHTML=''; upg.innerHTML='';
  CATALOG.forEach(t=>{
    const required=rank(t.plan); const unlocked = my>=required;
    const card=document.createElement('div');
    card.className='card'+(unlocked?' included':' locked');
    card.innerHTML = `
      <div class="kicker">${t.plan.toUpperCase()}</div>
      <h3 style="margin:6px 0">${t.title}</h3>
      <p class="sub">${t.desc}</p>
      <div class="toolbar">${unlocked? `<a class="button" href="${t.href}">Open</a>` : `<a class="button secondary" href="index.html">See plans</a>`}</div>`;
    (unlocked?inc:upg).appendChild(card);
  });
}

// Upgrade options with pricing + cascade text
const PRICING={pro:'$99/mo', mastery:'$149/mo'};
const PAYHIP={pro:'https://payhip.com/b/re4Hy', mastery:'https://payhip.com/b/re4Hy'}; // replace mastery if different
function renderUpgradeOptions(){
  const plan=getPlan(); const box=qs('#upgradeOptions'); if(!box) return;
  const proBlock=`<div class="card included"><h3>Pro — ${PRICING.pro}</h3><p class="sub">Includes everything in <b>Starter</b>, plus:</p><ul class="list"><li>Unlimited Cover Letters</li><li>Company Intel Outlines</li><li>Advanced Filters & Saved Search</li></ul><div class="toolbar"><a class="button" href="${PAYHIP.pro}">Upgrade to Pro</a></div></div>`;
  const masteryBlock=`<div class="card included"><h3>Mastery — ${PRICING.mastery}</h3><p class="sub">Includes everything in <b>Pro</b>, plus:</p><ul class="list"><li>Career Roadmap PDF</li><li>Priority Coaching Link</li></ul><div class="toolbar"><a class="button" href="${PAYHIP.mastery}">Upgrade to Mastery</a></div></div>`;
  if(plan==='starter') box.innerHTML = proBlock + masteryBlock;
  else if(plan==='pro') box.innerHTML = masteryBlock;
  else box.innerHTML = '<p class="sub">You already have every tool unlocked ✅</p>';
}

document.addEventListener('DOMContentLoaded', ()=>{ renderNovaSnap(); renderToolBuckets(); renderUpgradeOptions(); });
document.addEventListener('planchange', ()=>{ renderToolBuckets(); renderUpgradeOptions(); });
</script>
</body></html>
